<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>10-Day Compact Forecast — Mobile</title>
<style>
  :root{
    --bg1: #0f172a;
    --bg2: #1e293b;
    --card: rgba(255,255,255,0.03);
    --muted: #94a3b8;
    --accent: #facc15;
    --rain: #60a5fa;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    display:flex;align-items:center;justify-content:center;padding:14px;
    -webkit-font-smoothing:antialiased;color:#fff;
  }

  /* container */
  .wrap{
    width:100%;max-width:420px;background:#020617;border-radius:14px;border:1px solid #2b3947;
    overflow:hidden;box-shadow:0 8px 24px rgba(2,6,23,.6);
  }

  /* header */
  .head{
    display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid #273145;
  }
  .title{display:flex;gap:10px;align-items:center;}
  .title h1{font-size:16px;font-weight:700}
  .subtitle{font-size:12px;color:var(--muted);margin-top:2px}
  .controls{display:flex;gap:8px;align-items:center}
  .btn{
    background:#1f2a37;border:1px solid #334155;padding:6px 10px;border-radius:999px;font-size:12px;color:#e6eef8;
    cursor:pointer;
  }
  .btn:active{transform:translateY(1px)}
  .unit-toggle{display:flex;gap:6px;align-items:center;font-size:12px;color:var(--muted)}
  .unit-toggle button{background:transparent;border:none;color:inherit;cursor:pointer;padding:6px;border-radius:8px}
  .unit-toggle button.active{background:rgba(250,204,21,0.12);color:var(--accent);font-weight:600}

  /* list */
  .list{padding:10px;display:flex;flex-direction:column;gap:8px;max-height:72vh;overflow:auto}
  .day{
    background:var(--card);border-radius:10px;padding:8px;display:block;border:1px solid rgba(255,255,255,0.03);
    transition:transform .18s ease,box-shadow .18s ease;
  }
  .day:active{transform:scale(.997)}
  .row{display:flex;align-items:center;gap:8px}
  .date{width:56px;font-size:12px;color:#e6eef8;font-weight:600}
  .dow{font-size:11px;color:var(--muted);margin-top:2px}
  .icon{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px}
  .condition{flex:1;min-width:0}
  .cond-main{font-size:13px;font-weight:600;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .temps{font-size:13px;font-weight:700;min-width:56px;text-align:right}

  /* details (accordion content) */
  .details{
    max-height:0;overflow:hidden;transition:max-height .36s cubic-bezier(.2,.9,.2,1),padding .18s;
    padding:0 6px;
  }
  .day.open .details{padding:10px 6px 12px 6px}
  .day.open .details{max-height:220px}

  .meta{display:flex;gap:10px;flex-wrap:wrap;color:var(--muted);font-size:12px;margin-bottom:8px}
  .meta .item{background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:8px}

  /* sparkline */
  .spark{width:100%;height:28px;display:flex;align-items:center}
  .spark svg{width:100%;height:28px;display:block}

  /* small utilities */
  .prec{font-size:11px;color:var(--muted);margin-left:6px}
  .small{font-size:12px;color:var(--muted)}
  .accent{color:var(--accent);font-weight:700}

  /* alternating shade */
  .day:nth-child(even){background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00))}

  /* responsive tiny tweaks */
  @media (max-width:360px){
    .date{width:48px;font-size:11px}
    .title h1{font-size:15px}
    .temps{font-size:12px}
    .cond-main{font-size:12px}
  }
</style>
</head>
<body>
  <div class="wrap" role="application" aria-label="10 day weather forecast">
    <div class="head">
      <div class="title" aria-hidden="false">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <rect x="3" y="4" width="18" height="18" rx="3" stroke="#93a1b8" stroke-opacity=".12" fill="none"/>
          <circle cx="12" cy="12" r="4" fill="#facc15" opacity=".95"/>
        </svg>
        <div>
          <h1>10-Day Forecast</h1>
          <div class="subtitle">Clouds and sun — tap any day for details</div>
        </div>
      </div>

      <div class="controls" aria-hidden="false">
        <div class="unit-toggle" role="tablist" aria-label="Temperature units">
          <button id="unit-c" class="active" aria-pressed="true">°C</button>
          <button id="unit-f" aria-pressed="false">°F</button>
        </div>
        <button class="btn" id="refreshBtn" title="Refresh sample data">Refresh</button>
      </div>
    </div>

    <div class="list" id="forecastList" role="list" aria-label="Ten day forecast list">
      <!-- JavaScript will render 10 day items here -->
    </div>
  </div>

<script>
/*
  Features implemented:
  - 10-day mobile-friendly list
  - Accordion rows (tap to expand/collapse day details)
  - Unit toggle (°C / °F) with preference saved to localStorage
  - Mini hourly sparkline SVG generated from sample hourly arrays
  - Compact, accessible markup
*/

/* ---------- Sample data (10 days). 
   Each day: date, dow, cond, hi, lo (C), precip %, hourly temps (C), sunrise, sunset, wind, humidity
   In a real app you'd fetch this from an API. */
const sampleForecast = [
  {date:'11/07', dow:'Thu', cond:'Sunny', hi:30, lo:19, precip:5, hourly:[22,24,26,28,30,29,27,25,23,21,20,19], sunrise:'06:08', sunset:'17:34', wind:'8 km/h', humidity:42},
  {date:'11/08', dow:'Fri', cond:'Hazy sunshine', hi:29, lo:20, precip:10, hourly:[21,23,25,27,29,29,28,27,24,22,21,20], sunrise:'06:09', sunset:'17:33', wind:'10 km/h', humidity:46},
  {date:'11/09', dow:'Sat', cond:'Partly sunny', hi:28, lo:19, precip:25, hourly:[20,22,24,26,28,27,26,25,23,21,20,19], sunrise:'06:10', sunset:'17:32', wind:'12 km/h', humidity:52},
  {date:'11/10', dow:'Sun', cond:'Showers', hi:26, lo:20, precip:50, hourly:[20,20,21,22,24,25,24,23,22,21,20,20], sunrise:'06:11', sunset:'17:31', wind:'14 km/h', humidity:68},
  {date:'11/11', dow:'Mon', cond:'Rainy', hi:25, lo:19, precip:60, hourly:[19,19,20,21,22,22,21,21,20,19,19,19], sunrise:'06:12', sunset:'17:30', wind:'16 km/h', humidity:74},
  {date:'11/12', dow:'Tue', cond:'Sunny', hi:28, lo:18, precip:5, hourly:[18,20,22,24,26,27,26,25,24,22,20,18], sunrise:'06:13', sunset:'17:29', wind:'9 km/h', humidity:40},
  {date:'11/13', dow:'Wed', cond:'Mostly sunny', hi:29, lo:19, precip:8, hourly:[19,21,23,25,27,28,27,26,25,23,21,19], sunrise:'06:14', sunset:'17:28', wind:'11 km/h', humidity:45},
  {date:'11/14', dow:'Thu', cond:'Partly cloudy', hi:28, lo:18, precip:30, hourly:[18,19,21,23,26,26,25,24,23,22,20,19], sunrise:'06:15', sunset:'17:27', wind:'13 km/h', humidity:50},
  {date:'11/15', dow:'Fri', cond:'Cloudy', hi:27, lo:20, precip:40, hourly:[20,20,21,22,24,25,24,23,22,21,20,20], sunrise:'06:16', sunset:'17:26', wind:'14 km/h', humidity:60},
  {date:'11/16', dow:'Sat', cond:'Clear skies', hi:31, lo:19, precip:3, hourly:[22,24,26,28,30,31,30,28,26,24,22,21], sunrise:'06:17', sunset:'17:25', wind:'7 km/h', humidity:38}
];

/* ---------- Utility: persistent unit preference ---------- */
const unitKey = 'pref_units_v1'; // 'C' or 'F'
function getUnit(){ return localStorage.getItem(unitKey) || 'C' }
function setUnit(u){ localStorage.setItem(unitKey, u) }

/* ---------- Temperature conversion ---------- */
function cToF(c){ return Math.round((c * 9/5) + 32) }
function formatTemp(valC, unit){
  if(unit==='C') return `${Math.round(valC)}°`
  return `${cToF(valC)}°`
}

/* ---------- Sparkline generator ----------
   inputs: array of numbers, returns SVG string (polyline)
*/
function sparklineSVG(values){
  const w = 200, h = 28; // viewBox dimensions
  const max = Math.max(...values), min = Math.min(...values);
  const range = (max - min) || 1;
  const step = w / (values.length - 1);
  const points = values.map((v,i) => {
    const x = (i * step).toFixed(2);
    const y = (h - ((v - min) / range * h)).toFixed(2);
    return `${x},${y}`;
  }).join(' ');
  // small filled under-curve path for nicer look + polyline for stroke
  const poly = `<polyline points="${points}" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />`;
  const minY = Math.min(...values);
  return `<svg viewBox="0 0 ${w} ${h}" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">${poly}</svg>`;
}

/* ---------- Rendering ---------- */
const listEl = document.getElementById('forecastList');
const unitCBtn = document.getElementById('unit-c');
const unitFBtn = document.getElementById('unit-f');
const refreshBtn = document.getElementById('refreshBtn');

function render(forecast = sampleForecast){
  const unit = getUnit();
  // button styles
  if(unit === 'C'){ unitCBtn.classList.add('active'); unitCBtn.setAttribute('aria-pressed','true'); unitFBtn.classList.remove('active'); unitFBtn.setAttribute('aria-pressed','false') }
  else { unitFBtn.classList.add('active'); unitFBtn.setAttribute('aria-pressed','true'); unitCBtn.classList.remove('active'); unitCBtn.setAttribute('aria-pressed','false') }

  listEl.innerHTML = ''; // clear
  forecast.forEach((d, idx) => {
    const hi = formatTemp(d.hi, unit);
    const lo = formatTemp(d.lo, unit);
    const precip = d.precip;
    // create day box
    const day = document.createElement('article');
    day.className = 'day';
    day.setAttribute('role','listitem');
    day.innerHTML = `
      <div class="row" tabindex="0" role="button" aria-expanded="false">
        <div class="date" aria-hidden="true">
          <div>${d.date}</div>
          <div class="dow">${d.dow}</div>
        </div>
        <div class="icon" aria-hidden="true">
          ${iconSVG(d.cond, precip)}
        </div>
        <div class="condition">
          <div class="cond-main">${d.cond} <span class="prec"> ${precip}%</span></div>
        </div>
        <div class="temps" aria-hidden="true"><span class="accent">${hi}</span> <span style="opacity:.6">/${lo}</span></div>
      </div>
      <div class="details" aria-hidden="true">
        <div class="meta">
          <div class="item">Sun ${d.sunrise} • ${d.sunset}</div>
          <div class="item">Wind ${d.wind}</div>
          <div class="item">Humidity ${d.humidity}%</div>
        </div>
        <div class="spark" aria-hidden="true">
          ${sparklineSVG(d.hourly)}
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:8px;font-size:12px;color:var(--muted)">
          <div>Hourly (local)</div>
          <div>High/Low: ${hi} / ${lo}</div>
        </div>
      </div>
    `;
    // click/keyboard toggles
    const header = day.querySelector('.row');
    const details = day.querySelector('.details');
    header.addEventListener('click', ()=> toggle(day, header, details));
    header.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); toggle(day, header, details) } });
    listEl.appendChild(day);
  });
}

/* Accordion toggle */
function toggle(dayEl, header, details){
  const isOpen = dayEl.classList.contains('open');
  if(isOpen){
    dayEl.classList.remove('open');
    header.setAttribute('aria-expanded','false');
    details.setAttribute('aria-hidden','true');
  } else {
    // close any other open (single-open policy)
    const openNow = document.querySelector('.day.open');
    if(openNow){
      openNow.classList.remove('open');
      openNow.querySelector('.row').setAttribute('aria-expanded','false');
      openNow.querySelector('.details').setAttribute('aria-hidden','true');
    }
    dayEl.classList.add('open');
    header.setAttribute('aria-expanded','true');
    details.setAttribute('aria-hidden','false');
    // optional: smooth scroll into view on small devices
    setTimeout(()=> dayEl.scrollIntoView({behavior:'smooth', block:'center'}), 150);
  }
}

/* small function to return an SVG icon based on condition */
function iconSVG(cond, precip){
  // simple mapping
  const lc = cond.toLowerCase();
  if(lc.includes('sun') || lc.includes('clear')) {
    return `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="5" fill="${getComputedStyle(document.documentElement).getPropertyValue('--accent')||'#facc15'}" /></svg>`;
  }
  if(lc.includes('partly') || lc.includes('cloud')) {
    return `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z" fill="#cbd5e1" fill-opacity="0.06"/></svg>`;
  }
  if(lc.includes('rain') || lc.includes('shower')) {
    return `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25" fill="#60a5fa" fill-opacity="0.08"/></svg>`;
  }
  return `<svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="5" fill="#9ca3af" fill-opacity="0.06"/></svg>`;
}

/* ---------- Unit toggle handlers ---------- */
unitCBtn.addEventListener('click', ()=>{
  setUnit('C'); render();
});
unitFBtn.addEventListener('click', ()=>{
  setUnit('F'); render();
});

/* ---------- Refresh button (regenerates sample noise to show dynamic update) ---------- */
refreshBtn.addEventListener('click', ()=>{
  // mutate sample data slightly to demonstrate live updates
  sampleForecast.forEach(d=>{
    // jitter hourly values +/- up to 1.5 deg
    d.hourly = d.hourly.map(v=> Math.max(10, Math.round(v + (Math.random()-0.5)*3)));
    // jitter highs/lows to match
    d.hi = Math.max(d.lo+1, Math.round(Math.max(...d.hourly)));
    d.lo = Math.min(...d.hourly);
    d.precip = Math.max(0, Math.min(99, d.precip + Math.round((Math.random()-0.5)*12)));
  });
  render();
});

/* initial render */
if(!localStorage.getItem(unitKey)) setUnit('C'); // default
render();
</script>
</body>
</html>
