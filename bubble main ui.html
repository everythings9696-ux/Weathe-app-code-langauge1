<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Bubble Weather — Your App</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#05060a;
    --bg2:#0b1220;
    --bubble:#0f172a;
    --glass: rgba(255,255,255,0.04);
    --accent: #facc15;   /* sun */
    --accent-cool: #7dd3fc; /* highlight */
    --muted: #9fb0c8;
    --card-radius: 28px;
  }

  /* Page locked to viewport (no scroll) */
  html,body{height:100%;width:100%;margin:0;padding:0;overflow:hidden; -webkit-font-smoothing:antialiased}
  body{
    display:flex;align-items:center;justify-content:center;
    background: radial-gradient(800px 600px at 10% 10%, rgba(124,58,237,0.06), transparent 8%),
                linear-gradient(180deg,var(--bg1),var(--bg2));
    font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;
    color: #e8f0ff;
  }

  /* Root container sizes to perfectly fit phone screens */
  .wrap{
    width:100%;
    max-width:420px;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
  }

  /* Bubble area */
  .bubble-wrap{
    width:min(92vw,380px);
    max-width:380px;
    aspect-ratio:1/1; /* perfect circle */
    position:relative;
    display:flex;
    align-items:center;
    justify-content:center;
    transform-origin:center;
    user-select:none;
  }

  /* glossy bubble using layered radial gradients + inset shadows */
  .bubble{
    width:100%;
    height:100%;
    border-radius:50%;
    background:
      radial-gradient(40% 36% at 28% 18%, rgba(255,255,255,0.06), transparent 12%),
      radial-gradient(30% 22% at 68% 20%, rgba(255,255,255,0.035), transparent 8%),
      linear-gradient(180deg, rgba(255,255,255,0.01), rgba(5,10,18,0.32)),
      linear-gradient(180deg, #071123, #071026);
    border:1px solid rgba(255,255,255,0.03);
    box-shadow:
      inset 0 26px 40px rgba(255,255,255,0.02),
      inset 0 -10px 30px rgba(0,0,0,0.6),
      0 18px 60px rgba(2,6,23,0.7);
    position:relative;
    overflow:visible;
    display:flex;
    align-items:center;
    justify-content:center;
    transition:transform .25s cubic-bezier(.2,.9,.2,1);
    backdrop-filter: blur(6px);
  }

  /* top glossy rim */
  .bubble::before{
    content:"";
    position:absolute;left:4%;right:4%;top:4%;
    height:26%;
    border-radius:50%;
    background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.02));
    filter: blur(8px);
    opacity:.9;
    transform:translateY(-6%);
  }

  /* inner soft highlight bottom */
  .bubble::after{
    content:"";
    position:absolute;left:10%;right:10%;bottom:6%;
    height:18%;
    background: radial-gradient(60% 50% at 50% 30%, rgba(255,255,255,0.03), transparent 45%);
    border-radius:50%;
    pointer-events:none;
  }

  /* inner content stack */
  .content{
    width:78%;
    height:78%;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    gap:6px;
    position:relative;
    z-index:3;
  }

  .realfeel{
    font-size:12px;font-weight:600;color:var(--muted);
    letter-spacing:.6px;margin-bottom:2px;
  }

  .temp{
    font-size:64px;
    font-weight:800;
    line-height:1;
    letter-spacing:-1px;
  }

  .temp small{
    font-size:28px;
    font-weight:700;
    vertical-align:super;
    margin-left:6px;
    color:rgba(255,255,255,0.9);
  }

  .condition{
    font-size:18px;font-weight:700;color:#fff;margin-top:4px;
  }

  /* min/max temps left/right */
  .minmax{
    position:absolute;
    top:46%;
    left:12%;
    transform:translateY(-50%);
    text-align:center;font-weight:700;
    color:rgba(255,255,255,0.95);font-size:14px;
  }
  .minmax.right{ left:auto; right:12%; }

  .minmax .label{font-weight:600;color:var(--muted);font-size:11px}
  .minmax .val{display:block;margin-top:4px;font-size:16px}

  /* stats pill */
  .stats{
    margin-top:12px;
    background: rgba(0,0,0,0.28);
    border-radius:14px;
    padding:8px 12px;
    display:flex;
    gap:12px;
    align-items:center;
    box-shadow: 0 4px 18px rgba(2,6,23,0.45);
    border:1px solid rgba(255,255,255,0.03);
    backdrop-filter: blur(6px);
  }
  .stat{
    display:flex;flex-direction:column;align-items:center;min-width:56px;
  }
  .stat .k{font-weight:700;font-size:13px}
  .stat .t{font-size:11px;color:var(--muted);margin-top:2px}

  /* location + small controls top bar */
  .topbar{
    position:absolute;left:8%;right:8%;top:6%;display:flex;justify-content:space-between;align-items:center;z-index:4;
    color:rgba(255,255,255,0.9);font-weight:700;font-size:16px;
    display:flex;gap:8px;align-items:center;
  }
  .location{display:flex;gap:8px;align-items:center}
  .loc-dot{width:10px;height:10px;border-radius:50%;background:linear-gradient(180deg,#fff,#cbd5e1);box-shadow:0 2px 6px rgba(0,0,0,0.5)}
  .controls{display:flex;gap:8px;align-items:center}

  /* unit toggle */
  .unit-toggle{display:flex;gap:6px;background:transparent;padding:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.03)}
  .unit-toggle button{background:transparent;border:0;padding:6px 8px;color:var(--muted);font-weight:700;border-radius:8px;cursor:pointer}
  .unit-toggle button.active{background:linear-gradient(90deg, rgba(250,204,21,0.12), rgba(125,211,252,0.06));color:var(--accent);box-shadow:0 6px 18px rgba(2,6,23,0.4)}

  /* subtle bottom icon */
  .footer-ico{
    position:absolute;bottom:8%;left:50%;transform:translateX(-50%);z-index:4;opacity:0.9;
    display:flex;align-items:center;justify-content:center;
    width:56px;height:56px;border-radius:56px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.03);
    box-shadow: 0 10px 30px rgba(2,6,23,0.5);
  }

  /* pulse animation for bubble aura */
  .aura{
    position:absolute;inset:-12%;
    border-radius:50%;
    z-index:1;
    filter:blur(20px);
    background: radial-gradient(60% 50% at 50% 50%, rgba(124,58,237,0.05), transparent 30%);
    animation: pulse 3.6s ease-in-out infinite;
    pointer-events:none;
  }
  @keyframes pulse{
    0%{ transform:scale(.98); opacity:.9}
    50%{ transform:scale(1.02); opacity:.7}
    100%{ transform:scale(.98); opacity:.9}
  }

  /* micro interactions for small devices: tilt on touch */
  .bubble-wrap.dragging{ transition: none; }
  .bubble-wrap.shrink{ transform: scale(.985); }

  /* responsive tweaks */
  @media (max-width:360px){
    .temp{font-size:48px}
    .temp small{font-size:20px}
    .condition{font-size:15px}
    .minmax{font-size:12px}
    .stats{gap:8px;padding:6px 8px}
  }

  /* respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .aura, .bubble { animation: none; transition: none; }
  }

  /* slightly improve focus visible for keyboard users */
  .bubble-wrap:focus { outline: 3px solid rgba(124,58,237,0.25); outline-offset: 6px; }

  /* ensure adequate contrast for small muted text on very dark backgrounds */
  .topbar div[style] > div:last-child { color: var(--muted); opacity: 0.98; }
</style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Bubble weather overview">
    <noscript style="color:#9fb0c8;display:block;padding:8px;text-align:center">
      JavaScript is required to show live weather. Static preview shown.
    </noscript>

    <div class="bubble-wrap" id="bubbleWrap" tabindex="0" aria-label="Current weather" role="button">
      <div class="aura" aria-hidden="true"></div>

      <div class="bubble" id="bubble">
        <div class="topbar" id="topbar">
          <div class="location" id="location">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2C8 2 5 5 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-4-3-7-7-7z" stroke="#cbd5e1" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <div style="display:flex;flex-direction:column;line-height:1">
              <div style="font-weight:800">Ranchi</div>
              <div id="updatedLabel" style="font-size:11px;color:var(--muted);font-weight:600" aria-live="polite">Updated 10m ago</div>
            </div>
          </div>

          <div class="controls">
            <div class="unit-toggle" role="tablist" aria-label="Temperature units">
              <button id="btnC" class="active" aria-pressed="true">°C</button>
              <button id="btnF" aria-pressed="false">°F</button>
            </div>
          </div>
        </div>

        <div class="content" id="content">
          <div class="realfeel" id="realfeel">RealFeel® 25°</div>
          <div class="temp" id="temp">25<small id="unitLabel">°C</small></div>
          <div class="condition" id="condition">Hazy clouds</div>

          <div class="stats" role="group" aria-label="Weather details">
            <div class="stat">
              <div class="k" id="windVal">9.8 km/h</div>
              <div class="t">Wind</div>
            </div>
            <div class="stat">
              <div class="k" id="dirVal">E</div>
              <div class="t">Dir</div>
            </div>
            <div class="stat">
              <div class="k" id="humVal">63%</div>
              <div class="t">Humidity</div>
            </div>
          </div>
        </div>

        <div class="minmax left" aria-hidden="true" style="position:absolute;left:8.5%;top:42%">
          <div class="label">Low</div>
          <div class="val" id="lowVal">19°</div>
        </div>

        <div class="minmax right" aria-hidden="true" style="position:absolute;right:8.5%;top:42%">
          <div class="label">High</div>
          <div class="val" id="highVal">30°</div>
        </div>

        <div class="footer-ico" aria-hidden="true" title="Condition icon">
          <!-- small unique icon (foggy wave like your reference) -->
          <svg width="30" height="30" viewBox="0 0 24 24" fill="none"><path d="M3 15h18" stroke="#9dd3ff" stroke-width="1.6" stroke-linecap="round"/><path d="M3 18h18" stroke="#9dd3ff" stroke-width="1.6" stroke-linecap="round"/><path d="M6 12c1-2 4-3 6-2s3 3 6 3" stroke="#a0cfff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- Improved sample data and logic ---------- */
const sample = {
  tempC: 25,
  realFeelC: 25,
  condition: 'Hazy clouds',
  lowC: 19,
  highC: 30,
  windKmh: 9.8,
  dir: 'E',
  humidity: 63,
  updatedAt: Date.now()
};

const el = id => document.getElementById(id);
const btnC = el('btnC'), btnF = el('btnF');
const TEMP_KEY = 'bubble_unit_pref_v1';

function getUnit(){ return localStorage.getItem(TEMP_KEY) || 'C' }
function setUnit(u){ localStorage.setItem(TEMP_KEY,u) }

// conversions
function cToF(c){ return Math.round((c * 9/5) + 32) }
function kmhToMph(k){ return Math.round(k * 0.621371 * 10) / 10 } // 1 decimal
function mphToKmh(m){ return Math.round((m / 0.621371) * 10) / 10 }

// format helpers
function formatTempForUnit(c, unit){
  if(unit === 'C') return `${Math.round(c)}°`;
  return `${cToF(c)}°`;
}
function formatWind(kmh, unit){
  if(unit === 'C') return `${Math.round(kmh * 10) / 10} km/h`;
  else return `${kmhToMph(kmh)} mph`;
}
function humanUpdatedTime(ts){
  const diff = Math.round((Date.now() - ts) / 60000);
  if(diff <= 0) return 'Updated just now';
  if(diff === 1) return 'Updated 1 min ago';
  if(diff < 60) return `Updated ${diff} mins ago`;
  const hours = Math.round(diff / 60);
  return `Updated ${hours} hr${hours>1?'s':''} ago`;
}

function renderData(){
  const unit = getUnit();
  el('unitLabel').textContent = unit === 'C' ? '°C' : '°F';

  // keep small element intact by only updating the numeric part
  const tempEl = el('temp');
  const tempValue = unit === 'C' ? Math.round(sample.tempC) : cToF(sample.tempC);
  // set text content for numeric part while preserving <small>
  tempEl.innerHTML = `${tempValue}<small id="unitLabel">${unit === 'C' ? '°C' : '°F'}</small>`;

  el('realfeel').textContent = `RealFeel® ${formatTempForUnit(sample.realFeelC, unit)}`;
  el('condition').textContent = sample.condition;
  el('lowVal').textContent = formatTempForUnit(sample.lowC, unit);
  el('highVal').textContent = formatTempForUnit(sample.highC, unit);

  // wind with unit conversion
  el('windVal').textContent = formatWind(sample.windKmh, unit);
  el('dirVal').textContent = sample.dir;
  el('humVal').textContent = `${Math.round(sample.humidity)}%`;

  // readability for updated time
  el('updatedLabel').textContent = humanUpdatedTime(sample.updatedAt);

  // toggle button styles & aria-pressed
  if(unit==='C'){
    btnC.classList.add('active'); btnC.setAttribute('aria-pressed','true');
    btnF.classList.remove('active'); btnF.setAttribute('aria-pressed','false');
  } else {
    btnF.classList.add('active'); btnF.setAttribute('aria-pressed','true');
    btnC.classList.remove('active'); btnC.setAttribute('aria-pressed','false');
  }
}

/* init */
if(!localStorage.getItem(TEMP_KEY)) setUnit('C');
renderData();

/* events */
btnC.addEventListener('click', ()=>{ setUnit('C'); renderData(); });
btnF.addEventListener('click', ()=>{ setUnit('F'); renderData(); });

/* demo: clicking bubble toggles a fake update animation */
const bubbleWrap = document.getElementById('bubbleWrap');
const bubble = document.getElementById('bubble');
bubbleWrap.addEventListener('click', ()=> {
  bubble.classList.add('shrink');
  setTimeout(()=> bubble.classList.remove('shrink'), 220);

  // fake "live" update (bounded & rounded)
  sample.tempC = Math.max(-30, Math.min(60, sample.tempC + Math.round((Math.random()*2-1)*10)/10));
  sample.lowC = Math.round(sample.tempC - (Math.random()*3 + 1));
  sample.highC = Math.round(sample.tempC + (Math.random()*2 + 3));
  sample.humidity = Math.max(10, Math.min(99, sample.humidity + Math.round((Math.random()-0.5)*8)));
  sample.windKmh = Math.max(0, Math.round((sample.windKmh + (Math.random()*2-1)) * 10) / 10);
  sample.updatedAt = Date.now();
  renderData();
});

/* touch-drag tilt effect (keeps as-is, but ensure transform resets) */
let startX=0, startY=0, dragging=false;
bubbleWrap.addEventListener('touchstart', (e)=> {
  dragging = true;
  const t = e.touches[0];
  startX = t.clientX; startY = t.clientY;
  bubbleWrap.classList.add('dragging');
});
bubbleWrap.addEventListener('touchmove', (e)=> {
  if(!dragging) return;
  const t = e.touches[0];
  const dx = (t.clientX - startX);
  const dy = (t.clientY - startY);
  const rx = Math.max(-8, Math.min(8, -dy/10));
  const ry = Math.max(-10, Math.min(10, dx/10));
  bubble.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) translateZ(0)`;
});
bubbleWrap.addEventListener('touchend', ()=> {
  dragging = false;
  bubbleWrap.classList.remove('dragging');
  bubble.style.transform = '';
});

/* keyboard accessibility: Enter/Space triggers update */
bubbleWrap.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter' || e.key === ' '){
    e.preventDefault();
    bubbleWrap.click();
  }
});

/* OPTIONAL: If you later integrate live API, call updateFromAPI() to update `sample` then call renderData() */
function updateFromAPI(data){
  // example mapping: accept {tempC, realFeelC, lowC, highC, windKmh, dir, humidity}
  Object.assign(sample, data);
  sample.updatedAt = Date.now();
  renderData();
}
</script>
</body>
</html>
